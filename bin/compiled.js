'use strict';var g=null,h=this;function j(a,b){var c=a.split("."),d=h;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&void 0!==b?d[e]=b:d=d[e]?d[e]:d[e]={}}function k(a,b){function c(){}c.prototype=b.prototype;a.C=b.prototype;a.prototype=new c};function l(){this.data=g;this.height=this.width=0;this.B=!1;this.t=g}l.prototype.a=function(){return this.height};l.prototype.b=function(){return this.width};function n(){l.call(this);this.data=new Image}k(n,l);function p(){}p.prototype.create=function(a){var b=g;try{var c={premultipliedAlpha:!1,alpha:!1},b=a.getContext("webgl",c)||a.getContext("experimental-webgl",c)}catch(d){}b===g&&alert("Missing context");return b};function q(){this.k=new p;this.e=[];this.d=g}q.f=function(){return q.g?q.g:q.g=new q};function r(){return q.f().d}q.prototype.create=function(a){a=this.k.create(a);this.e[this.e.length]=a;this.d==g&&(this.d=a);return a};function s(a){a=a||r();this.id=a.createTexture();this.source=g}s.prototype.bind=function(){r().bindTexture(3553,this.id)};s.prototype.create=function(a,b){var c=r(),d;d=new n;d=this.source=d;d.width=a;d.height=b;this.bind();d=r();d.texParameteri(3553,10241,9985);d.texParameteri(3553,10240,9729);this.source.b()==this.source.a()&&r().generateMipmap(3553);c.texImage2D(3553,0,6408,a,b,0,6408,5121,g);r().bindTexture(3553,g)};s.prototype.a=function(){return this.source.a()};s.prototype.b=function(){return this.source.b()};function t(a){this.l=a}t.prototype.create=function(){return new s(this.l)};function v(){this.n=this.m=g}v.prototype.clear=function(){this.n=this.m=g};function w(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}w.prototype.BYTES_PER_ELEMENT=8;w.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};w.prototype.toString=Array.prototype.join;if("undefined"==typeof Float64Array){try{w.BYTES_PER_ELEMENT=8}catch(x){}w.prototype.BYTES_PER_ELEMENT=w.prototype.BYTES_PER_ELEMENT;w.prototype.set=w.prototype.set;w.prototype.toString=w.prototype.toString;j("Float64Array",w)};function y(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}y.prototype.BYTES_PER_ELEMENT=4;y.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]};y.prototype.toString=Array.prototype.join;"undefined"==typeof Float32Array&&(y.BYTES_PER_ELEMENT=4,y.prototype.BYTES_PER_ELEMENT=y.prototype.BYTES_PER_ELEMENT,y.prototype.set=y.prototype.set,y.prototype.toString=y.prototype.toString,j("Float32Array",y));function z(a,b){var c=new Float32Array(3);c[0]=a;c[1]=1;c[2]=b;return c}function A(a,b){var c=a[0],d=a[1],e=a[2],c=1/Math.sqrt(c*c+d*d+e*e);b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c}function B(a,b,c){var d=a[0],e=a[1];a=a[2];var f=b[0],m=b[1];b=b[2];c[0]=e*b-a*m;c[1]=a*f-d*b;c[2]=d*m-e*f};function C(a,b,c,d,e,f,m,u,M){a[0]=b;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=d;a[11]=e;a[12]=f;a[13]=m;a[14]=u;a[15]=M;return a}function D(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]}new Float64Array(3);new Float64Array(3);var E=[new Float64Array(4),new Float64Array(4),new Float64Array(4)];new Float64Array(16);function F(){var a=new Float32Array(16);a[0]=a[5]=a[10]=a[15]=1;this.w=a;this.position=new Float32Array(3);this.rotation=new Float32Array(3);this.scale=z(1,1);this.z=!0};function G(a){F.call(this);this.p=new Float32Array(16);this.h=new Float32Array(16);this.A=new Float32Array(9);this.o=z(0,0);var b=new Float32Array(16),c=this.position,d=this.o,e=E[0],f=[0,0,-5];e[0]=f[0]-c[0];e[1]=f[1]-c[1];e[2]=f[2]-c[2];A(e,e);e[3]=0;f=E[1];B(e,d,f);A(f,f);f[3]=0;d=E[2];B(f,e,d);A(d,d);d[3]=0;e[0]=-e[0];e[1]=-e[1];e[2]=-e[2];D(b,0,f);D(b,1,d);D(b,2,e);b[3]=0;b[7]=0;b[11]=0;b[15]=1;var e=-c[0],d=-c[1],c=-c[2],f=b[1]*e+b[5]*d+b[9]*c+b[13],m=b[2]*e+b[6]*d+b[10]*c+b[14],u=b[3]*e+b[7]*
d+b[11]*c+b[15];b[12]=b[0]*e+b[4]*d+b[8]*c+b[12];b[13]=f;b[14]=m;b[15]=u;this.p=b;switch(a){case "2D":a=new Float32Array(16);this.h=C(a,1,1,-2/99,0,-0,-0,-101/99,1);break;default:a=800/600,b=new Float32Array(16),c=Math.sin(22.5),0==c||0==a?a=b:(c=Math.cos(22.5)/c,a=C(b,c/a,c,-101/99,-1,0,0,-200/99,0)),this.h=a}}k(G,F);function H(a){this.parent=g;this.children=[];this.j=0;this.F=a||new F};function I(){var a=new Float32Array(4);a[0]=1;a[1]=1;a[2]=1;a[3]=1;this.value=a};function J(){H.call(this);this.color=new I;this.direction=z(1,1);this.r=new I;this.s=!0}k(J,H);function K(){J.call(this)}k(K,J);function L(){H.call(this);this.q=new K;this.u=[];this.v=0}k(L,H);function N(a){this.c=q.f().create(a);this.D=new t(this.c);this.i=new v}N.prototype.a=function(){return 0};N.prototype.b=function(){return 0};window.application=function(){var a=new N(document.getElementById("test"));new G("3D");var b=new L;a.c.clearColor(0.2,0.2,0.2,1);a.c.clear(16640);for(var c=0,b=b.j;c<b;++c);a.i.clear()};
